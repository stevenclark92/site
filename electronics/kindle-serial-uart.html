<!DOCTYPE html>

<html lang="en-GB">
<head>
  <!-- Meta -->
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="/assets/css/style.css?v=">
  <!-- Icon stack -->
          <meta name="msapplication-TileColor" content="#FFF" />
        <meta name="theme-color" content="#FFF" />
        <link rel="apple-touch-icon" sizes="57x57" href="/assets/favicon/apple-icon-57x57.png" />
        <link rel="apple-touch-icon" sizes="60x60" href="/assets/favicon/apple-icon-60x60.png" />
        <link rel="apple-touch-icon" sizes="72x72" href="/assets/favicon/apple-icon-72x72.png" />
        <link rel="apple-touch-icon" sizes="114x114" href="/assets/favicon/apple-icon-114x114.png" />
        <link rel="apple-touch-icon" sizes="76x76" href="/assets/favicon/apple-icon-76x76.png" />
        <link rel="apple-touch-icon" sizes="120x120" href="/assets/favicon/apple-icon-120x120.png" />
        <link rel="apple-touch-icon" sizes="152x152" href="/assets/favicon/apple-icon-152x152.png" />
        <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicon/apple-icon-180x180.png" />
        <link rel="icon" type="image/png" href="/assets/favicon/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="/assets/favicon/android-icon-36x36.png" sizes="36x36" />
        <link rel="icon" type="image/png" href="/assets/favicon/android-icon-48x48.png" sizes="48x48" />
        <link rel="icon" type="image/png" href="/assets/favicon/android-icon-72x72.png" sizes="72x72" />
        <link rel="icon" type="image/png" href="/assets/favicon/android-icon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="/assets/favicon/android-icon-144x144.png" sizes="144x144" />
        <link rel="icon" type="image/png" href="/assets/favicon/android-icon-192x192.png" sizes="192x192" />
        <link rel="icon" type="image/png" href="/assets/favicon/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/png" href="/assets/favicon/favicon-16x16.png" sizes="16x16" />
        <meta name="msapplication-TileImage" content="/assets/favicon/ms-icon-144x144.png" />
        <meta name="msapplication-square70x70logo" content="/assets/favicon/ms-icon-70x70.png" />
        <meta name="msapplication-square150x150logo" content="/assets/favicon/ms-icon-150x150.png" />
        <meta name="msapplication-wide310x150logo" content="/assets/favicon/ms-icon-310x150.png" />
        <meta name="msapplication-square310x310logo" content="/assets/favicon/ms-icon-310x310.png" />
        <link href="/assets/favicon/apple-startup-320x460.png" media="(device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 1)" rel="apple-touch-startup-image" />
        <link href="/assets/favicon/apple-startup-640x920.png" media="(device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image" />
        <link href="/assets/favicon/apple-startup-640x1096.png" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image" />
        <link href="/assets/favicon/apple-startup-748x1024.png" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 1) and (orientation: landscape)" rel="apple-touch-startup-image" />
        <link href="/assets/favicon/apple-startup-750x1024.png" media="" rel="apple-touch-startup-image" />
        <link href="/assets/favicon/apple-startup-750x1294.png" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image" />
        <link href="/assets/favicon/apple-startup-768x1004.png" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 1) and (orientation: portrait)" rel="apple-touch-startup-image" />
        <link href="/assets/favicon/apple-startup-1182x2208.png" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" rel="apple-touch-startup-image" />
        <link href="/assets/favicon/apple-startup-1242x2148.png" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" rel="apple-touch-startup-image" />
        <link href="/assets/favicon/apple-startup-1496x2048.png" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" rel="apple-touch-startup-image" />
        <link href="/assets/favicon/apple-startup-1536x2008.png" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" rel="apple-touch-startup-image" />
        <link rel="manifest" href="/assets/favicon/manifest.json" />
  <!-- Site title & meta -->
  <title>Communicating with a Bricked Kindle Voyage over Serial/UART | steveclark.io</title>
  <!-- TODO metadesc -->
</head>

<body class="dark:bg-zinc-800 dark:text-slate-50">
  <header class="lg:fixed max-lg:flex max-xl:items-baseline p-8 lg:top-10 lg:left-10 font-light">
  <p id="logo-mb" class="text-2xl">
    <a class="max-xl:hidden" href="https://steveclark.io/">steveclark<span class="text-yellow-400">.</span>io
    </a>
    <a class="xl:hidden" href="https://steveclark.io/">sc<span class="text-yellow-400">.</span>io
    </a>
  </p>
  <nav class="*:py-1 lg:*:mt-4 max-lg:*:flex max-lg:flex justify-between w-full">
    <ul class="lg:*:mt-2">
      <li><span class="text-yellow-400 mr-1 max-lg:ml-2">/</span><a href="/notes">notes</a></li>
      <li><span class="text-yellow-400 mr-1 max-lg:ml-2">/</span><a href="/projects">projects</a></li>
      <li><span class="text-yellow-400 mr-1 max-lg:ml-2">/</span><a href="/">about</a></li>
    </ul>
    <ul class="lg:*:mt-2 max-sm:hidden">
      <li><span class="text-blue-400 mr-1 max-lg:ml-2">|</span><a href="https://github.com/stevenclark92" target="_blank">github</a></li>
      <li><span class="text-blue-400 mr-1 max-lg:ml-2">|</span><a href="https://www.linkedin.com/in/stevenjc/" target="_blank">linkedin</a></li>
    </ul>
  </nav>
</header>
  <main class="lg:m-10 p-8">
    <!-- TODO: Refactor -->
    <div
      class="mx-auto prose prose-a:font-normal prose-a:decoration-1 prose-h1:font-bold prose-h2:font-medium dark:prose-invert mb-6"
    >
      <div class="categories flex justify-between align-top mb-4">
  <p class="m-0 align">
    Posted on
    <span class="font-semibold">May  4, 2024</span> in
    <span
      class="text-transparent bg-clip-text bg-gradient-to-br from-blue-300 to-indigo-500 lowercase font-semibold"
    >
      @Electronics
    </span>
  </p>

  <div class="tags *:inline max-sm:hidden">
    
    <p
      class="text-transparent bg-clip-text bg-gradient-to-br from-yellow-300 to-amber-500 lowercase font-semibold"
    >
      [rK]
    </p>
    
    <p
      class="text-transparent bg-clip-text bg-gradient-to-br from-yellow-300 to-amber-500 lowercase font-semibold"
    >
      [Kindle]
    </p>
    
  </div>
</div>

<h1 class="head flex justify-between mb-4 items-baseline">Communicating with a Bricked Kindle Voyage over Serial/UART</h1>

<p>Recently, I purchased my fifth Amazon Kindle in twice as many years. My buying habits aren’t motivated by a desire to have the latest and greatest at all times - my phones and laptops generally last for many years, and I only upgrade them begrudgingly - instead, the Kindle coincidentally manages to be perfectly designed for its intended function, and through a combination of disorganization, clumsiness, and forgetfulness on my part, to be lost or broken by me.</p>

<p>I certainly don’t mean this post as a criticism of the Kindle or a lamentation of Amazon; the issue lies categorically outside the device’s design, and the few Amazon devices I’ve owned that have passed from natural causes have only done so at the end of a long and useful lifespan. It’s a prime example of a PICNIC.</p>

<p>Concurrently, the neurodivergence implicated in the incessant loss of and damage to my possessions has also sparked a lifelong and unyielding desire to take absolutely everything apart. My first thought from a young age upon seeing a functioning electronic device has always been: <strong>“Absolutely, categorically, and definitively not”.</strong></p>

<p>Starting around age 6, the majority of my belongings have - at one time or another - found themselves strapped to Dr Frankenstein Jr’s table, fixed by the monstrous glare of a half-pint mad scientist gleefully prying component after component free from the shackles of its housing, only to have the boy’s well of motivation run dry approximately two-thirds of the way through putting the screws back in. The Kindles I’ve owned as an adult have fared only slightly better.</p>

<p>In much the same way that a child learns to remove its socks long before it learns to don them alone, from a youth spent torturing electronics came, much later, the ability to <em>unbreak</em> them. Today, most of my devices shelter under the protection spell of ‘having a warranty I don’t want to void’, but broken and old devices remain ripe for experimentation and eventual salvation. To date, I’ve found a serviceable bodge for all Kindle issues short of leaving it on a bus, at least for as long as a new one takes to arrive.</p>

<p>This time, however, the goal is not merely to restore stock functionality; I aim to surpass it.</p>

<h3 id="dont-try-this-at-home-if-you-dont-know-what-youre-doing">Don’t try this at home if you don’t know what you’re doing.</h3>

<p>This article will inevitably be a long read, and in it, I will explore how to perform a total hardware and software diagnostic and repair of a broken Kindle Voyage before outlining some possible modifications for those with the requisite knowledge, technical skills, and abandon. Many of these steps will equally apply to other devices for reasons that will become obvious, but I will disclaim early that <strong>this is not intended to be a guide or to act as instructions</strong>. If you choose to follow in my footsteps, <strong>on your head be any damage to your devices or statutory standing with Amazon</strong>.</p>

<p>I will cite my sources and share the resources I found throughout this process; however, most information has been sourced from the depths of long-dead forum users’ post histories and deleted Reddit threads. If I have included a piece of information or a fragment of code that you have created, and I have failed to acknowledge your contribution appropriately, please do reach out so that I can do so.</p>

<p>I must also state that I have no political motivation for this article, nor is it intended to lambast Jeff Bezos or his organization. I believe that I own my devices and have the right to do what I want with them - and that Amazon has the right to keep selling as many new products as they like and withhold support when I inevitably mess something up.</p>

<h3 id="dont-try-this-at-home-if-you-dont-know-what-youre-doing-1">Don’t try this at home if you don’t know what you’re doing.</h3>

<p>This article will inevitably be a long read, and in it, I will explore how to perform a total hardware and software diagnostic and repair of a broken Kindle Voyage before outlining some possible modifications for those with the requisite knowledge, technical skills, and abandon. Many of these steps will equally apply to other devices for reasons that will become obvious, but I will disclaim early that <strong>**this is not intended to be a guide or to act as instructions</strong><strong>. If you choose to follow in my footsteps, </strong><strong>on your head be any damage to your devices or statutory standing with Amazon</strong>**.</p>

<p>I will cite my sources and share the resources I found throughout this process; however, most information has been sourced from the depths of long-dead forum users’ post histories and deleted Reddit threads. If I have included a piece of information or a fragment of code that you have created, and I have failed to acknowledge your contribution appropriately, please do reach out so that I can do so.</p>

<p>I must also state that I have no political motivation for this article, nor is it intended to lambast Jeff Bezos or his organization. I believe that I own my devices and have the right to do what I want with them - and that Amazon has the right to keep selling as many new products as they like and withhold support when I inevitably mess something up.</p>

<p>With disclaimers disclaimed and backs covered, let’s get into it.</p>

<h2 id="why-the-kindle-voyage">Why the Kindle Voyage?</h2>

<p>I started this journey for a specific reason: the Kindle Voyage, released a decade ago this year, was only sold for a limited time and, in my mind, never had an adequate successor. Occupying a niche above the Paperwhite but at a price point that remained within reach of most consumers, the Kindle Voyage offered a better display, automatic brightness adjustment and a more refined design with page turn buttons and haptic feedback. It is universally considered one of the best e-book readers ever made, and for me, it occupies the top spot comfortably even now.</p>

<p>[Voyage pic]</p>

<p>Unfortunately for me, not long after the only generation of the Kindle Voyage was released, it was retired from sale and replaced by the bigger and more feature-filled Oasis. The Oasis is a lovely device, but with a significantly increased footprint and price, the lower-mid-tier market had to decide between entry-level models or breaking the bank following the EOL of the Kindle Voyage. The majority bought Paperwhites, but the lack of a direct successor has also driven significant and sustained demand for second-hand Voyages. I find myself in this camp. I could shell out £300 for a Scribe (itself having replaced the Oasis) or step down to the Paperwhite, but as a creature of habit and routine, I don’t find either option particularly attractive.</p>

<h2 id="the-voyage-in-context">The Voyage in Context</h2>

<p>The Kindle Voyage, like all e-book readers, is just a low-end tablet computer. The main (only) distinction between these and other products in their category is the type of screen used. Other highlighted features that set these devices apart from peers in their cohort - such as extended battery life - are a function of this primary difference rather than intentional parts of the devices’ design, however brilliant they may be.</p>

<h3 id="hardware-considerations">Hardware Considerations</h3>

<p><a href="CITE">E-paper displays significantly reduce eye strain compared to other displays</a> but cannot refresh at sub-second intervals due to hardware limitations. There are many articles about this online, so I’ll stop short of a full explanation aside from the most relevant part: Most LCDs used in phones and tablets refresh at 60 Hz or more, but the displays used in e-book readers (partial refresh notwithstanding) generally do so at between 0.25-4 Hz. Higher is possible, but tradeoffs abound beyond this point, and I’ve yet to meet anyone who can read four pages per second who would need them made.</p>

<p>[Wormhole pencil image]</p>

<p>Refreshing more slowly requires less power, which means less need for large batteries, leading to smaller, lighter products. (LCDs also require current to maintain an image where e-paper displays don’t, but it’s negligible compared to the power needed to change state).</p>

<p>Rendering greyscale pages very slowly is also not particularly intensive from a computational standpoint. As a result, Amazon (and other e-book producers) stick to a known formula; significant hardware revisions are infrequent. Most devices released between 2012 and 2019 were virtually identical behind the bezel, and almost all used the same processor.  Sure, newer models came with touch and light, but the heavy lifting was performed by the same chip, with only minor increases in RAM and eMMC sizes between successive generations.</p>

<h3 id="slow-and-steady-wins-it">Slow and Steady Wins it</h3>

<p>Arguably, the only technology category that has progressed more slowly than the e-book reader is the book itself. But then, if the fleshy technology doing the reading remains unchanged, why would the silicon that provides the material need to continue to improve once perfected?</p>

<p>The Kindle Voyage was top of its class during the 2010s, offering a vastly improved display while still using the Freescale/NXP i.MX6 processor of its contemporaries. Newer models use a new processor with 64-bit architecture. Eventually, giant shoulders will become available upon which to stand, meaning we will one day be able to crack these, too, but it will take time.</p>

<p>The current device line-up as of 2022 represents the first significant hardware revision to Kindles since 2013. While the processor hails from a new vendor and the RAM has doubled to 1 GB, the primary benefit is 64-bit architecture rather than additional speed. Newer models have an identically clocked processor and perform similarly in benchmarks. A Kindle from 2012 can still accomplish the same job almost as well as one from 2022 - aside from web browsing, perhaps.</p>

<p>If you plan to make any of these modifications to a Kindle released after 2022, stop and seek alternative sources of information. <strong>These steps will not work for you. You will brick your device.</strong></p>

<h2 id="unplanned-obsolescence">Unplanned Obsolescence</h2>

<p>As simple as e-book readers are by modern technological standards, the regular release cycle of devices is less about cashing in on the desire for novelty and continued forward progression; all electronic devices have a finite lifespan, and a handful of unavoidable failure points render these devices - and most others - unusable after a decade or so of service. </p>

<p>Even where the best possible care is always maintained, entropy sees to it that one of the following issues will arise with increasing probability over time:</p>

<ul>
  <li>
    <p>Lithium-ion batteries have extremely finite lifespans.</p>
  </li>
  <li>
    <p>eMMC has a limited number of write cycles.</p>
  </li>
  <li>
    <p>USB connectors fail, as do solder joints.</p>
  </li>
  <li>
    <p>Liquid and dust cause corrosion and shorts.</p>
  </li>
  <li>
    <p>People like me get brave and brick them by deleting or corrupting firmware.</p>
  </li>
  <li>
    <p>People brick them following standard update procedures.</p>
  </li>
  <li>
    <p>Software developers tire of porting code to legacy components and sunset perfectly usable devices in favour of supporting the newer, shinier versions.</p>
  </li>
</ul>

<p>All these issues are fixable, but diagnostics are costly and time-consuming, as no two devices will have the same repair pathway. Repackaging the same processor and adding a couple of extra features at intervals that roughly align with the expected end-of-life of legacy devices is easy, profitable, and arguably drives more innovation in the category.</p>

<h3 id="why-bother">Why Bother?</h3>

<p>Benefits notwithstanding, I find it a crying shame from an environmental standpoint that an e-book reader from 2014 has virtual feature parity with one from 2021, but due to these failure points, can be found in droves on eBay for pennies - and probably in higher numbers still in drawers and landfills. </p>

<p>As a result of slow progress and my clumsiness, more than once, I have paid the same price, years apart, <em>for the same hardware</em>. Obviously, a product has greater value than the sum cost of its hardware, but I’m not concerned with that for this project. My motivation is simple:</p>

<ul>
  <li>
    <p>Because <strong><em>I can.</em></strong></p>
  </li>
  <li>
    <p>Because <strong><em>it’s fun.</em></strong></p>
  </li>
</ul>

<p>There’s little more to it than that, and I don’t mean for this post to question any device’s value, nor do I have a strong opinion on that. It’s worth what people are willing to pay. As it turns out, I was willing to pay £20 and three weekends of my life spent descending yet further into madness. Go figure.</p>

<h2 id="waffleoveronto-the-hardware">Waffle over; onto the hardware</h2>

<p>Inside the Kindle Voyage, you will find:</p>

<ul>
  <li>
    <p>A Freescale Semiconductor <a href="http://www.freescale.com/docs/pcn_attachments/16116_IMX6SLCEC.pdf">MCIMX6L8DVN10AB</a> Applications Processor, with a single 32-bit core clocked at 1GHz.</p>
  </li>
  <li>
    <p>4 GB (32 Gb) of Toshiba <a href="http://datasheet.octopart.com/THGBM5G5A1JBAIR-Toshiba-datasheet-14049752.pdf">THGBM5G5A1JBAIR</a> eMMC NAND Flash.</p>
  </li>
  <li>
    <p>512 MB (4 Gb) of Samsung K4P4G324EQ-RGC2 LPDDR2 SDRAM.</p>
  </li>
  <li>
    <p>A Texas Instruments <a href="http://www.ti.com/product/drv2667">DRV2667</a> Piezo Haptic Driver.</p>
  </li>
</ul>

<p>– Include Reference Architecture –</p>

<p>The NXP i.MX processors are ARM-based SoCs designed for low-power mobile devices. They’re not the fastest, but they’re full-featured ARM Cortex-based processors well-suited for this application. 512 MB of RAM sounds tiny compared to a modern phone or laptop, but considering the device spends most of its waking time gently cycling through pages of monochrome text, there’s little need for more. Even the limited storage space provides ample capacity for thousands of e-books - even the current flagship model offers only 8 GB of storage and 1 GB of RAM a decade later.</p>
<h3 id="usb-otg">USB OTG</h3>

<p>Modern USB standards are - and I do not say this lightly - a fucking mess and the journey that led us to our current state of peripheral chaos was in part paved by the ubiquitous use of Micro USB across tablets and mobile devices in the 2010s. All Kindles before 2022 made use of not only Micro USB, but implemented an additional, supplement-to-standard-but-widely-accepted protocol known as USB OTG, or USB On The Go.</p>

<p>USB OTG ports have five pins in place of the typical four, with the status of the additional ‘Sense’ pin being used to select whether the device should act as host or device. A floating ‘Sense’ pin - the default when using a non-OTG cable - will render service to the machine on the other end as a peripheral. Pulling this pin to ground by shorting the Sense and Ground pins inside the connector will instead inform the device that it should act as the host and expect a peripheral to be attached through the port. I hope you like dongles because there are many where this is headed.</p>

<p>The Kindle Voyage and the 7th Generation Paperwhite both made away with built-in headphone ports, as was the style at the time. In order to continue to be able to provide audio output, they were shipped with USB to 3.5mm dongles that made use of this OTG protocol to inform the Kindle that it should output audio via its USB port. As far as I know, this functionality wasn’t used beyond this single adapter, but the beauty of this near-standard is that with a few tweaks of software <strong>it most certainly can be.</strong> More on this later.</p>

<h2 id="the-software">The Software</h2>

<p>Kindle’s operating system is a Linux flavour with a lot of overlap with Android. Following power on, the device is bootstrapped with Das U-Boot which hands off to the Linux kernel, which loads the Kindle’s desktop environment and applications. Drilling into it further, it’s quite an interesting set-up and one that makes a lot of sense given the application.</p>

<p>Rather than having a single, fully-fledged u-boot instance (that would take longer to load - potentially 10 seconds from pushing the button to the desktop), Kindles have two instances installed. At boot, an extremely stripped-back build handles the bare essentials - interfacing with the low-level hardware and pointing to the right addresses for the kernel to take over - but with a hidden option, called BIST, behind which hides a complete u-boot environment. This environment also includes an implementation of Fastboot, which those familiar with Android debugging will be familiar with, enabling more extensive debugging via USB from a computer.</p>

<p>https://www.embeddedartists.com/wp-content/uploads/2020/11/iMX_Boot_Times.pdf</p>

<h2 id="communicating-with-the-device">Communicating with the Device</h2>

<p>UART 1.8v</p>

<p>Minicom</p>

<p>Root password</p>

<p>UBOOT</p>

<p>NAND Sectors going bad</p>

<p>Making it worse by erasing the whole thing</p>

<p>BIST</p>

<p>FASTBOOT</p>

<p>Flashing back onto the NAND</p>

<p>Bad sectors preventing a complete transfer of the BIST image</p>

<p>Nice boot loop bro</p>

<p>Clearly, this is an unwinnable situation and something more drastic needs done:</p>

<h2 id="replacing-the-problematic-nand-chip">Replacing the Problematic NAND Chip</h2>

<p>BGA soldering is a right cunt</p>

<ul>
  <li>
    <p>lots of flux</p>
  </li>
  <li>
    <p>don’t let it not have flux at any point</p>
  </li>
  <li>
    <p>hotter than you think you need to go</p>
  </li>
  <li>
    <p>wait longer than you think you should</p>
  </li>
  <li>
    <p>don’t pull, let it come off on its own. Gentle pressure at MOST</p>
  </li>
  <li>
    <p>ventilate</p>
  </li>
</ul>

<p>Even being careful you will probably lose pads. Fortunately, these are (most often) NC pads, which have less copper holding them to the board. I lost two myself. If you lose a vital pad it’s game over so make sure you work slowly.</p>

<p>The board seems to have survived its ordeal…</p>

<p>New NAND!</p>

<h2 id="getting-back-into-fastboot">Getting back into Fastboot</h2>

<p>Using the i.MX USB tool to patch firmware into RAM</p>

<h2 id="back-to-a-functioning-kindle">Back to a Functioning Kindle</h2>

<p>Restoring original functionality</p>

<h2 id="adding-some-new-functionality">Adding some new functionality</h2>

<p>Original is boring, let’s get a full Linux distro on it.</p>

<h2 id="whats-next">What’s next?</h2>


    </div>
  </main>

  <footer
    class="fixed text-xs bg-inherit rounded-md text-zinc-500 bottom-0 left-0"
  >
    <p class="p-2 lg:m-16">© Steve Clark 2024</p>
  </footer>


</body>
</html>